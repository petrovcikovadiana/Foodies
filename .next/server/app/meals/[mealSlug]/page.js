(()=>{var e={};e.id=551,e.ids=[551],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},47:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>_,tree:()=>d});var i=r(7096),a=r(6132),s=r(7284),n=r.n(s),l=r(2564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["meals",{children:["[mealSlug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1075)),"/Users/dianapetrovcikova/Webdev/next/Foodies/app/meals/[mealSlug]/page.js"]}]},{}]},{error:[()=>Promise.resolve().then(r.bind(r,1354)),"/Users/dianapetrovcikova/Webdev/next/Foodies/app/meals/error.js"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,4014)),"/Users/dianapetrovcikova/Webdev/next/Foodies/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.bind(r,1499)),"/Users/dianapetrovcikova/Webdev/next/Foodies/app/not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/dianapetrovcikova/Webdev/next/Foodies/app/meals/[mealSlug]/page.js"],u="/meals/[mealSlug]/page",m={require:r,loadChunk:()=>Promise.resolve()},_=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/meals/[mealSlug]/page",pathname:"/meals/[mealSlug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5114:(e,t,r)=>{Promise.resolve().then(r.bind(r,7454))},4664:(e,t,r)=>{Promise.resolve().then(r.bind(r,8542)),Promise.resolve().then(r.bind(r,9834)),Promise.resolve().then(r.t.bind(r,8469,23))},5624:(e,t,r)=>{Promise.resolve().then(r.bind(r,4433))},9722:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3579,23)),Promise.resolve().then(r.t.bind(r,619,23)),Promise.resolve().then(r.t.bind(r,1459,23)),Promise.resolve().then(r.t.bind(r,3456,23)),Promise.resolve().then(r.t.bind(r,847,23)),Promise.resolve().then(r.t.bind(r,7303,23))},5303:()=>{},7454:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var i=r(3854),a=r(4218),s=r(5548),n=r.n(s),l=r(1956),o=r.n(l);let d={src:"/_next/static/media/icon.665d374e.svg",height:16,width:16,blurWidth:0,blurHeight:0};var c=r(8176),u=r.n(c),m=r(1018),_=r(891),p=r.n(_);function h({href:e,children:t}){let r=(0,m.usePathname)();return(0,i.jsxs)(n(),{href:e,className:r.startsWith(e)?`${p().link} ${p().active}`:p().link,children:[t," "]})}function g(){let[e,t]=(0,a.useState)(!1);function r(){t(!1)}return(0,i.jsxs)("header",{className:u().header,children:[(0,i.jsxs)(n(),{className:u().logo,href:"/",onClick:r,children:[i.jsx(o(),{src:d,alt:"A plate with food on it",priority:!0}),"GrandFood"]}),i.jsx("button",{type:"button",className:u().menuButton,onClick:function(){t(e=>!e)},"aria-label":"Open menu","aria-expanded":e,children:i.jsx("span",{className:u().burger})}),i.jsx("nav",{className:`${u().nav} ${e?u().open:""}`,children:(0,i.jsxs)("ul",{children:[i.jsx("li",{children:i.jsx(h,{href:"/meals",onClick:r,children:"Browse Recipes"})}),i.jsx("li",{children:i.jsx(h,{href:"/meals/share",onClick:r,children:"Share recipe"})})]})}),e&&i.jsx("div",{className:u().backdrop,onClick:r})]})}},8542:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var i=r(3854),a=r(4218),s=r(84),n=r.n(s);function l(e,t=1){let r=Number(e);return Number.isFinite(r)?r.toFixed(t):"–"}function o({slug:e}){let[t,r]=(0,a.useState)(null);if((0,a.useEffect)(()=>{fetch(`/api/nutrition/${e}`).then(e=>e.json()).then(r).catch(()=>r({error:!0}))},[e]),!t)return i.jsx("p",{children:"Calculating nutrition values…"});if(t.error)return i.jsx("p",{children:"Failed to load nutrition values."});let s=t.perServing;return(0,i.jsxs)("section",{className:n().paper,children:[(0,i.jsxs)("header",{className:n().header,children:[i.jsx("h3",{className:n().title,children:"Estimated nutrition"}),i.jsx("span",{className:n().badge,children:"1 serving"})]}),i.jsx("table",{className:n().table,children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[i.jsx("td",{className:n().label,children:"Energy"}),(0,i.jsxs)("td",{className:n().value,children:[l(s.kcal,0)," kcal"]})]}),(0,i.jsxs)("tr",{children:[i.jsx("td",{className:n().label,children:"Protein"}),(0,i.jsxs)("td",{className:n().value,children:[l(s.protein_g)," g"]})]}),(0,i.jsxs)("tr",{children:[i.jsx("td",{className:n().label,children:"Carbs"}),(0,i.jsxs)("td",{className:n().value,children:[l(s.carbs_g)," g"]})]}),(0,i.jsxs)("tr",{children:[i.jsx("td",{className:n().label,children:"Fat"}),(0,i.jsxs)("td",{className:n().value,children:[l(s.fat_g)," g"]})]}),(0,i.jsxs)("tr",{children:[i.jsx("td",{className:n().label,children:"Fiber"}),(0,i.jsxs)("td",{className:n().value,children:[l(s.fiber_g)," g"]})]}),(0,i.jsxs)("tr",{children:[i.jsx("td",{className:n().label,children:"Salt"}),(0,i.jsxs)("td",{className:n().value,children:[l(s.salt_g)," g"]})]})]})}),t.unknown?.length?i.jsx("p",{className:n().note,children:"Some ingredients could not be calculated."}):null]})}},4433:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Error});var i=r(3854);function Error(){return(0,i.jsxs)("main",{className:"error",children:[i.jsx("h1",{children:"An error occurred!"}),i.jsx("p",{children:"Fail to fetch meal data. Please try again later."})]})}},9834:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var i=r(3854),a=r(4218),s=r(3987),n=r.n(s);function l(e){return Array.isArray(e)&&e.length>0&&e[0]&&"object"==typeof e[0]&&Array.isArray(e[0].items)}function o({baseServings:e=1,ingredients:t}){let[r,s]=(0,a.useState)(e),o=e>0?r/e:1,d=(0,a.useMemo)(()=>t?l(t)?t.map(e=>{let t=(e.items||[]).map(e=>{if("string"==typeof e)return e;let t=Number(e.amount),r=Number.isFinite(t);return{...e,amount:r?t*o:e.amount}});return{title:e.title??"",items:t}}):(t||[]).map(e=>{if("string"==typeof e)return e;let t=Number(e.amount),r=Number.isFinite(t);return{...e,amount:r?t*o:e.amount}}):[],[t,o]),c=e=>{if("string"==typeof e)return e;let t=null!=e.amount&&""!==e.amount?function(e){if(!Number.isFinite(e))return"";let t=Math.round(10*e)/10;return Number.isInteger(t),String(t)}(Number(e.amount)):null,r=e.unit?String(e.unit).trim():null,i=e.name?String(e.name).trim():null;return[t,r,i].filter(Boolean).join(" ")};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:n().servings,children:[i.jsx("label",{className:n().label,children:"Serves"}),(0,i.jsxs)("div",{className:n().controls,children:[i.jsx("button",{type:"button",onClick:()=>s(e=>Math.max(e-1,1)),disabled:1===r,className:n().button,children:"−"}),i.jsx("span",{className:n().value,children:r}),i.jsx("button",{type:"button",onClick:()=>s(e=>Math.min(e+1,20)),disabled:20===r,className:n().button,children:"+"})]})]}),l(t)?i.jsx("div",{className:n().groupWrap,children:d.map((e,t)=>(0,i.jsxs)("div",{className:n().group,children:[e.title?i.jsx("div",{className:n().groupTitle,children:e.title}):null,i.jsx("ul",{className:n().list,children:(e.items||[]).map((e,t)=>i.jsx("li",{children:c(e)},t))})]},t))}):i.jsx("ul",{className:n().list,children:d.map((e,t)=>i.jsx("li",{children:c(e)},t))})]})}},8176:e=>{e.exports={header:"main-header_header__NcZu_",nav:"main-header_nav__vsGWg",logo:"main-header_logo__CyWPR",menuButton:"main-header_menuButton__Mg2G2",burger:"main-header_burger__EmLT9",backdrop:"main-header_backdrop__h6Tkl",open:"main-header_open__dzFw1"}},891:e=>{e.exports={link:"nav-link_link__1hnRU",active:"nav-link_active__a_MRG"}},84:e=>{e.exports={paper:"nutrition-table_paper__Tl1T7",header:"nutrition-table_header__v_Niu",title:"nutrition-table_title__m2KmP",badge:"nutrition-table_badge__4nQTb",table:"nutrition-table_table__hk1T0",label:"nutrition-table_label__srPDP",value:"nutrition-table_value__bWaKU",note:"nutrition-table_note__wivWk",loading:"nutrition-table_loading__HpqP4",error:"nutrition-table_error__vMQHD"}},718:e=>{e.exports={wrapper:"page_wrapper__yjHLg",header:"page_header__iS9WF",image:"page_image__TX6Bw",imageMedia:"page_imageMedia__Ivc_B",headerText:"page_headerText__uLfnd","fade-slide-in-from-right":"page_fade-slide-in-from-right__Ql6Xr",nutrition:"page_nutrition__9Rxkc","fade-slide-in-from-left":"page_fade-slide-in-from-left__LftlF",main:"page_main__81eZS",info:"page_info__rj_tw","fade-slide-in-from-bottom":"page_fade-slide-in-from-bottom__AlhEU",cooking_time:"page_cooking_time__xscJk",verticalDivider:"page_verticalDivider__oivX0",creator:"page_creator__OAZ_v",groupWrap:"page_groupWrap__cga2N",groupTitle:"page_groupTitle__2yKzM",summary:"page_summary__u_nKB",ingredients:"page_ingredients__EUjBe",ingredientsCard:"page_ingredientsCard__NfGNl",ingredientsList:"page_ingredientsList__jEy9j",ingredientItem:"page_ingredientItem__4EwTL",instructions:"page_instructions__sI0XL",instructionsList:"page_instructionsList__lrhje",instructionItem:"page_instructionItem__6YFvo",stepIndex:"page_stepIndex____hw2",loading:"page_loading__DKm8n",flash:"page_flash__QjihM"}},3987:e=>{e.exports={label:"servings_label__CDyFT",controls:"servings_controls__SgTdk",servings:"servings_servings__23aSU",button:"servings_button__xjjfN",groupTitle:"servings_groupTitle__TzC1m",value:"servings_value__a5Vuy",list:"servings_list__mYFBy"}},4014:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>d});var i=r(4656);r(7272);var a=r(5153);let s=(0,a.createProxy)(String.raw`/Users/dianapetrovcikova/Webdev/next/Foodies/app/components/main-header/main-header.js`),{__esModule:n,$$typeof:l}=s,o=s.default,d={title:"NextLevel Food",description:"Delicious meals, shared by a food-loving community."};function c({children:e}){return i.jsx("html",{lang:"en",children:(0,i.jsxs)("body",{children:[i.jsx(o,{}),e]})})}},1075:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y,generateMetadata:()=>N});var i=r(4656),a=r(718),s=r.n(a),n=r(8462),l=r(1412),o=r(7581),d=r(9189);function c(e){return(0,d.w_)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M72,88V40a8,8,0,0,1,16,0V88a8,8,0,0,1-16,0ZM216,40V224a8,8,0,0,1-16,0V176H152a8,8,0,0,1-8-8,268.75,268.75,0,0,1,7.22-56.88c9.78-40.49,28.32-67.63,53.63-78.47A8,8,0,0,1,216,40ZM200,53.9c-32.17,24.57-38.47,84.42-39.7,106.1H200ZM119.89,38.69a8,8,0,1,0-15.78,2.63L112,88.63a32,32,0,0,1-64,0l7.88-47.31a8,8,0,1,0-15.78-2.63l-8,48A8.17,8.17,0,0,0,32,88a48.07,48.07,0,0,0,40,47.32V224a8,8,0,0,0,16,0V135.32A48.07,48.07,0,0,0,128,88a8.17,8.17,0,0,0-.11-1.31Z"},child:[]}]})(e)}var u=r(5153);let m=(0,u.createProxy)(String.raw`/Users/dianapetrovcikova/Webdev/next/Foodies/app/meals/servings-adjuster.js`),{__esModule:_,$$typeof:p}=m,h=m.default;var g=r(8639),x=r.n(g);let v=(0,u.createProxy)(String.raw`/Users/dianapetrovcikova/Webdev/next/Foodies/app/components/nutrition-table.js`),{__esModule:f,$$typeof:j}=v,b=v.default;async function N({params:e}){let t=(0,n.BU)(e.mealSlug);return{title:t.title,description:t.summary}}function y({params:e}){let t=(0,n.BU)(e.mealSlug);return t||(0,l.notFound)(),(0,i.jsxs)("div",{className:s().wrapper,children:[i.jsx("header",{className:s().header,children:i.jsx("div",{className:s().headerText,children:(0,i.jsxs)("div",{children:[" ",i.jsx("h1",{children:t.title}),(0,i.jsxs)("p",{className:s().creator,children:["by ",t.creator]})]})})}),(0,i.jsxs)("main",{className:s().main,children:[(0,i.jsxs)("div",{className:s().nutrition,children:[(0,i.jsxs)("div",{className:s().image,children:[i.jsx("div",{className:s().imageMedia,children:i.jsx(x(),{src:t.image,alt:t.title,fill:!0})}),(0,i.jsxs)("div",{className:s().info,children:[(0,i.jsxs)("div",{className:s().cooking_time,children:[i.jsx(o.dKE,{}),i.jsx("p",{children:"Cooking time"}),i.jsx("p",{children:function(e){let t=Number(e);if(!Number.isFinite(t)||t<=0)return"";let r=Math.floor(t/60),i=t%60;return 0===r?`${i} min`:0===i?`${r} h`:`${r} h ${i} min`}(t.cooking_time)})]}),i.jsx("div",{className:s().verticalDivider}),(0,i.jsxs)("div",{className:s().cooking_time,children:[i.jsx(c,{})," ",i.jsx("p",{children:"Serves"}),(0,i.jsxs)("span",{children:[" ",t.servings??1]})]})]})]}),i.jsx(b,{slug:t.slug})]}),(0,i.jsxs)("section",{className:s().ingredients,children:[i.jsx("h2",{children:"Ingredients"}),i.jsx("div",{className:s().ingredientsCard,children:i.jsx(h,{baseServings:t.servings??1,ingredients:t.ingredients})})]}),(0,i.jsxs)("section",{className:s().instructions,children:[i.jsx("h2",{children:"Instructions"}),i.jsx("ol",{className:s().instructionsList,children:t.instructions.map((e,t)=>(0,i.jsxs)("li",{className:s().instructionItem,children:[i.jsx("span",{className:s().stepIndex,children:t+1}),i.jsx("p",{children:e})]},t))})]})]})]})}},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>s,default:()=>o});var i=r(5153);let a=(0,i.createProxy)(String.raw`/Users/dianapetrovcikova/Webdev/next/Foodies/app/meals/error.js`),{__esModule:s,$$typeof:n}=a,l=a.default,o=l},1499:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(4656);function a(){return(0,i.jsxs)("main",{className:"not-found",children:[i.jsx("h1",{children:"Meal not found"}),i.jsx("p",{children:"Unfortunaley, we could not find the requested page or meal data. "})]})}},8462:(e,t,r)=>{"use strict";r.d(t,{$v:()=>m,BU:()=>c,EU:()=>u,_T:()=>d});var i=r(9546),a=r.n(i),s=r(1142),n=r.n(s),l=r(1993);let o="meal-images";async function d({category:e="",q:t=""}={}){let r=(0,l.R)(),i=r.from("meals").select("*").order("id",{ascending:!1});t&&(i=i.ilike("title",`%${t.toLowerCase().trim()}%`)),e&&(i=i.contains("categories",[e]));let{data:a,error:s}=await i;if(s)throw s;return a??[]}async function c(e){let t=(0,l.R)(),{data:r,error:i}=await t.from("meals").select("*").eq("slug",e).maybeSingle();if(i)throw i;return r??null}async function u(e){let t=(0,l.R)(),r=a()(e.title,{lower:!0}),i=Number(e.cooking_time);if(!Number.isFinite(i)||i<=0)throw Error("Invalid cooking time");let s=Number(e.servings);if(!Number.isInteger(s)||s<1||s>20)throw Error("Invalid servings");let d=n()(String(e.instructions||"[]")),c=JSON.parse(e.ingredients||"[]"),u=JSON.parse(d||"[]"),m=JSON.parse(e.categories||"[]"),_=e.image.name.split(".").pop(),p=`${r}.${_}`,h=await e.image.arrayBuffer(),g=Buffer.from(h),{error:x}=await t.storage.from(o).upload(p,g,{upsert:!0,contentType:e.image.type||"image/*"});if(x)throw x;let{data:v}=t.storage.from(o).getPublicUrl(p),f=v.publicUrl,j={slug:r,title:e.title,image:f,ingredients:c,instructions:u,cooking_time:i,categories:m,servings:s,creator:e.creator,creator_email:e.creator_email},{error:b}=await t.from("meals").insert(j);if(b)throw b;return r}async function m(e){let t=(0,l.R)(),r=await c(e);if(!r)return;if(r.image){let e=r.image.split("/").pop();await t.storage.from(o).remove([e])}let{error:i}=await t.from("meals").delete().eq("slug",e);if(i)throw i}},1993:(e,t,r)=>{"use strict";r.d(t,{R:()=>a});var i=r(6170);function a(){let e=process.env.SUPABASE_URL,t=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!t)throw Error("Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY");return(0,i.eI)(e,t,{auth:{persistSession:!1}})}},4998:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(8531);let a=e=>{let t=(0,i.fillMetadataSegment)(".",e.params,"icon.png");return[{type:"image/png",sizes:"1024x1024",url:t+"?5daadb4d16e9b2c7"}]}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[271,79,844,639,311],()=>r(47));module.exports=i})();