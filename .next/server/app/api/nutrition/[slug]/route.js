"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/nutrition/[slug]/route";
exports.ids = ["app/api/nutrition/[slug]/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute&page=%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute.js&appDir=%2FUsers%2Fdianapetrovcikova%2FWebdev%2Fnext%2FFoodies%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdianapetrovcikova%2FWebdev%2Fnext%2FFoodies&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute&page=%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute.js&appDir=%2FUsers%2Fdianapetrovcikova%2FWebdev%2Fnext%2FFoodies%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdianapetrovcikova%2FWebdev%2Fnext%2FFoodies&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_dianapetrovcikova_Webdev_next_Foodies_app_api_nutrition_slug_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/nutrition/[slug]/route.js */ \"(rsc)/./app/api/nutrition/[slug]/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/nutrition/[slug]/route\",\n        pathname: \"/api/nutrition/[slug]\",\n        filename: \"route\",\n        bundlePath: \"app/api/nutrition/[slug]/route\"\n    },\n    resolvedPagePath: \"/Users/dianapetrovcikova/Webdev/next/Foodies/app/api/nutrition/[slug]/route.js\",\n    nextConfigOutput,\n    userland: _Users_dianapetrovcikova_Webdev_next_Foodies_app_api_nutrition_slug_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/nutrition/[slug]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZudXRyaXRpb24lMkYlNUJzbHVnJTVEJTJGcm91dGUmcGFnZT0lMkZhcGklMkZudXRyaXRpb24lMkYlNUJzbHVnJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbnV0cml0aW9uJTJGJTVCc2x1ZyU1RCUyRnJvdXRlLmpzJmFwcERpcj0lMkZVc2VycyUyRmRpYW5hcGV0cm92Y2lrb3ZhJTJGV2ViZGV2JTJGbmV4dCUyRkZvb2RpZXMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGZGlhbmFwZXRyb3ZjaWtvdmElMkZXZWJkZXYlMkZuZXh0JTJGRm9vZGllcyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM4QjtBQUMzRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2Zvb2RpZXMvP2ZiZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2RpYW5hcGV0cm92Y2lrb3ZhL1dlYmRldi9uZXh0L0Zvb2RpZXMvYXBwL2FwaS9udXRyaXRpb24vW3NsdWddL3JvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9udXRyaXRpb24vW3NsdWddL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbnV0cml0aW9uL1tzbHVnXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbnV0cml0aW9uL1tzbHVnXS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9kaWFuYXBldHJvdmNpa292YS9XZWJkZXYvbmV4dC9Gb29kaWVzL2FwcC9hcGkvbnV0cml0aW9uL1tzbHVnXS9yb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9udXRyaXRpb24vW3NsdWddL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute&page=%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute.js&appDir=%2FUsers%2Fdianapetrovcikova%2FWebdev%2Fnext%2FFoodies%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdianapetrovcikova%2FWebdev%2Fnext%2FFoodies&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/nutrition/[slug]/route.js":
/*!*******************************************!*\
  !*** ./app/api/nutrition/[slug]/route.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_meals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/meals */ \"(rsc)/./lib/meals.js\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_nutrition__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/nutrition */ \"(rsc)/./lib/nutrition.js\");\n\n\n\n\nconst db = better_sqlite3__WEBPACK_IMPORTED_MODULE_2___default()(\"meals.db\");\nasync function GET(_req, { params }) {\n    const slug = params.slug;\n    const meal = (0,_lib_meals__WEBPACK_IMPORTED_MODULE_1__.getMeal)(slug);\n    if (!meal) return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n        error: \"Not found\"\n    }, {\n        status: 404\n    });\n    // cache (napr. 7 dní)\n    const cached = db.prepare(\"SELECT data_json, updated_at FROM nutrition_cache WHERE meal_slug = ?\").get(slug);\n    const now = Date.now();\n    const TTL = 7 * 24 * 60 * 60 * 1000;\n    if (cached && now - Number(cached.updated_at) < TTL) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(JSON.parse(cached.data_json));\n    }\n    const apiKey = process.env.FDC_API_KEY;\n    if (!apiKey) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Missing FDC_API_KEY in env\"\n        }, {\n            status: 500\n        });\n    }\n    const data = await (0,_lib_nutrition__WEBPACK_IMPORTED_MODULE_3__.computeNutritionFromIngredients)(meal.ingredients, meal.servings ?? 1, apiKey);\n    db.prepare(`\n    INSERT OR REPLACE INTO nutrition_cache (meal_slug, data_json, updated_at)\n    VALUES (?, ?, ?)\n  `).run(slug, JSON.stringify(data), now);\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(data);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL251dHJpdGlvbi9bc2x1Z10vcm91dGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJDO0FBQ0w7QUFDTDtBQUNpQztBQUVsRSxNQUFNSSxLQUFLRixxREFBR0EsQ0FBQztBQUVSLGVBQWVHLElBQUlDLElBQUksRUFBRSxFQUFFQyxNQUFNLEVBQUU7SUFDeEMsTUFBTUMsT0FBT0QsT0FBT0MsSUFBSTtJQUN4QixNQUFNQyxPQUFPUixtREFBT0EsQ0FBQ087SUFDckIsSUFBSSxDQUFDQyxNQUFNLE9BQU9ULGtGQUFZQSxDQUFDVSxJQUFJLENBQUM7UUFBRUMsT0FBTztJQUFZLEdBQUc7UUFBRUMsUUFBUTtJQUFJO0lBRTFFLHNCQUFzQjtJQUN0QixNQUFNQyxTQUFTVCxHQUNaVSxPQUFPLENBQ04seUVBRURDLEdBQUcsQ0FBQ1A7SUFFUCxNQUFNUSxNQUFNQyxLQUFLRCxHQUFHO0lBQ3BCLE1BQU1FLE1BQU0sSUFBSSxLQUFLLEtBQUssS0FBSztJQUUvQixJQUFJTCxVQUFVRyxNQUFNRyxPQUFPTixPQUFPTyxVQUFVLElBQUlGLEtBQUs7UUFDbkQsT0FBT2xCLGtGQUFZQSxDQUFDVSxJQUFJLENBQUNXLEtBQUtDLEtBQUssQ0FBQ1QsT0FBT1UsU0FBUztJQUN0RDtJQUVBLE1BQU1DLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVztJQUN0QyxJQUFJLENBQUNILFFBQVE7UUFDWCxPQUFPeEIsa0ZBQVlBLENBQUNVLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUE2QixHQUN0QztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7SUFFQSxNQUFNZ0IsT0FBTyxNQUFNekIsK0VBQStCQSxDQUNoRE0sS0FBS29CLFdBQVcsRUFDaEJwQixLQUFLcUIsUUFBUSxJQUFJLEdBQ2pCTjtJQUdGcEIsR0FBR1UsT0FBTyxDQUNSLENBQUM7OztFQUdILENBQUMsRUFDQ2lCLEdBQUcsQ0FBQ3ZCLE1BQU1hLEtBQUtXLFNBQVMsQ0FBQ0osT0FBT1o7SUFFbEMsT0FBT2hCLGtGQUFZQSxDQUFDVSxJQUFJLENBQUNrQjtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Zvb2RpZXMvLi9hcHAvYXBpL251dHJpdGlvbi9bc2x1Z10vcm91dGUuanM/ZDU5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGdldE1lYWwgfSBmcm9tIFwiQC9saWIvbWVhbHNcIjtcbmltcG9ydCBzcWwgZnJvbSBcImJldHRlci1zcWxpdGUzXCI7XG5pbXBvcnQgeyBjb21wdXRlTnV0cml0aW9uRnJvbUluZ3JlZGllbnRzIH0gZnJvbSBcIkAvbGliL251dHJpdGlvblwiO1xuXG5jb25zdCBkYiA9IHNxbChcIm1lYWxzLmRiXCIpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKF9yZXEsIHsgcGFyYW1zIH0pIHtcbiAgY29uc3Qgc2x1ZyA9IHBhcmFtcy5zbHVnO1xuICBjb25zdCBtZWFsID0gZ2V0TWVhbChzbHVnKTtcbiAgaWYgKCFtZWFsKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJOb3QgZm91bmRcIiB9LCB7IHN0YXR1czogNDA0IH0pO1xuXG4gIC8vIGNhY2hlIChuYXByLiA3IGRuw60pXG4gIGNvbnN0IGNhY2hlZCA9IGRiXG4gICAgLnByZXBhcmUoXG4gICAgICBcIlNFTEVDVCBkYXRhX2pzb24sIHVwZGF0ZWRfYXQgRlJPTSBudXRyaXRpb25fY2FjaGUgV0hFUkUgbWVhbF9zbHVnID0gP1wiLFxuICAgIClcbiAgICAuZ2V0KHNsdWcpO1xuXG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIGNvbnN0IFRUTCA9IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuXG4gIGlmIChjYWNoZWQgJiYgbm93IC0gTnVtYmVyKGNhY2hlZC51cGRhdGVkX2F0KSA8IFRUTCkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihKU09OLnBhcnNlKGNhY2hlZC5kYXRhX2pzb24pKTtcbiAgfVxuXG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52LkZEQ19BUElfS0VZO1xuICBpZiAoIWFwaUtleSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IFwiTWlzc2luZyBGRENfQVBJX0tFWSBpbiBlbnZcIiB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9LFxuICAgICk7XG4gIH1cblxuICBjb25zdCBkYXRhID0gYXdhaXQgY29tcHV0ZU51dHJpdGlvbkZyb21JbmdyZWRpZW50cyhcbiAgICBtZWFsLmluZ3JlZGllbnRzLFxuICAgIG1lYWwuc2VydmluZ3MgPz8gMSxcbiAgICBhcGlLZXksXG4gICk7XG5cbiAgZGIucHJlcGFyZShcbiAgICBgXG4gICAgSU5TRVJUIE9SIFJFUExBQ0UgSU5UTyBudXRyaXRpb25fY2FjaGUgKG1lYWxfc2x1ZywgZGF0YV9qc29uLCB1cGRhdGVkX2F0KVxuICAgIFZBTFVFUyAoPywgPywgPylcbiAgYCxcbiAgKS5ydW4oc2x1ZywgSlNPTi5zdHJpbmdpZnkoZGF0YSksIG5vdyk7XG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGRhdGEpO1xufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldE1lYWwiLCJzcWwiLCJjb21wdXRlTnV0cml0aW9uRnJvbUluZ3JlZGllbnRzIiwiZGIiLCJHRVQiLCJfcmVxIiwicGFyYW1zIiwic2x1ZyIsIm1lYWwiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJjYWNoZWQiLCJwcmVwYXJlIiwiZ2V0Iiwibm93IiwiRGF0ZSIsIlRUTCIsIk51bWJlciIsInVwZGF0ZWRfYXQiLCJKU09OIiwicGFyc2UiLCJkYXRhX2pzb24iLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiRkRDX0FQSV9LRVkiLCJkYXRhIiwiaW5ncmVkaWVudHMiLCJzZXJ2aW5ncyIsInJ1biIsInN0cmluZ2lmeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/nutrition/[slug]/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/meals.js":
/*!**********************!*\
  !*** ./lib/meals.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteMeal: () => (/* binding */ deleteMeal),\n/* harmony export */   getMeal: () => (/* binding */ getMeal),\n/* harmony export */   getMeals: () => (/* binding */ getMeals),\n/* harmony export */   saveMeal: () => (/* binding */ saveMeal)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var slugify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! slugify */ \"(rsc)/./node_modules/slugify/slugify.js\");\n/* harmony import */ var slugify__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(slugify__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var xss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! xss */ \"(rsc)/./node_modules/xss/lib/index.js\");\n/* harmony import */ var xss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(xss__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! node:fs */ \"node:fs\");\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(node_fs__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n// working with file system\n\nconst db = better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default()(\"meals.db\");\ndb.prepare(`\n  CREATE TABLE IF NOT EXISTS meals (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    slug TEXT NOT NULL UNIQUE,\n    title TEXT NOT NULL,\n    image TEXT NOT NULL,\n    ingredients TEXT NOT NULL,\n    instructions TEXT NOT NULL,\n    cooking_time INTEGER NOT NULL,\n    categories TEXT NOT NULL,\n        servings INTEGER NOT NULL DEFAULT 1,\n\n    creator TEXT NOT NULL,\n    creator_email TEXT NOT NULL\n  )\n`).run();\ndb.prepare(`\n  CREATE TABLE IF NOT EXISTS ingredient_map (\n    ingredient_norm TEXT PRIMARY KEY,\n    fdc_id INTEGER NOT NULL,\n    note TEXT\n  )\n`).run();\ndb.prepare(`\n  CREATE TABLE IF NOT EXISTS nutrition_cache (\n    meal_slug TEXT PRIMARY KEY,\n    data_json TEXT NOT NULL,\n    updated_at INTEGER NOT NULL\n  )\n`).run();\ndb.prepare(`\n  CREATE TABLE IF NOT EXISTS piece_weights (\n    ingredient_norm TEXT PRIMARY KEY,\n    grams_per_piece REAL NOT NULL\n  )\n`).run();\nasync function getMeals({ category = \"\", q = \"\" } = {}) {\n    await new Promise((resolve)=>setTimeout(resolve, 2000));\n    // DB má categories jako JSON string => filtr přes LIKE na \"value\"\n    // title search je case-insensitive přes LOWER()\n    let query = \"SELECT * FROM meals\";\n    const where = [];\n    const params = {};\n    if (category) {\n        // categories uložené jako JSON array: [\"snack\",\"dinner\"]\n        // match na \"snack\" včetně uvozovek, aby se netrefovalo do podřetězců\n        where.push(\"categories LIKE @cat\");\n        params.cat = `%\\\"${category}\\\"%`;\n    }\n    if (q) {\n        where.push(\"LOWER(title) LIKE @q\");\n        params.q = `%${q.toLowerCase().trim()}%`;\n    }\n    if (where.length) {\n        query += \" WHERE \" + where.join(\" AND \");\n    }\n    query += \" ORDER BY id DESC\";\n    const meals = db.prepare(query).all(params);\n    return meals.map((m)=>({\n            ...m,\n            ingredients: safeJsonArray(m.ingredients),\n            instructions: safeJsonArray(m.instructions),\n            categories: safeJsonArray(m.categories)\n        }));\n}\nfunction getMeal(slug) {\n    const meal = db.prepare(\"SELECT * FROM meals Where slug = ?\").get(slug);\n    if (!meal) return null;\n    return {\n        ...meal,\n        ingredients: safeJsonArray(meal.ingredients),\n        instructions: safeJsonArray(meal.instructions),\n        categories: safeJsonArray(meal.categories)\n    };\n}\n// function to save file and data to database\nasync function saveMeal(meal) {\n    meal.slug = slugify__WEBPACK_IMPORTED_MODULE_1___default()(meal.title, {\n        lower: true\n    });\n    meal.instructions = xss__WEBPACK_IMPORTED_MODULE_2___default()(meal.instructions);\n    meal.cooking_time = Number(meal.cooking_time);\n    if (!Number.isFinite(meal.cooking_time) || meal.cooking_time <= 0) {\n        throw new Error(\"Invalid cooking time\");\n    }\n    meal.servings = Number(meal.servings);\n    if (!Number.isInteger(meal.servings) || meal.servings < 1 || meal.servings > 20) {\n        throw new Error(\"Invalid servings\");\n    }\n    const extension = meal.image.name.split(\".\").pop();\n    const fileName = `${meal.slug}.${extension}`;\n    const stream = node_fs__WEBPACK_IMPORTED_MODULE_3___default().createWriteStream(`public/images/${fileName}`);\n    const bufferedImage = await meal.image.arrayBuffer();\n    stream.write(Buffer.from(bufferedImage), (error)=>{\n        if (error) {\n            throw new Error(\"Saving image filed\");\n        }\n    });\n    meal.image = `/images/${fileName}`;\n    db.prepare(`\n    INSERT INTO meals\n      (title, ingredients, instructions, image, cooking_time, categories, servings, creator, creator_email, slug)\n    VALUES\n      (@title, @ingredients, @instructions, @image, @cooking_time, @categories,@servings, @creator, @creator_email, @slug)\n  `).run(meal);\n}\nfunction deleteMeal(slug) {\n    const meal = getMeal(slug);\n    // smažeme obrázek z disku, pokud existuje\n    if (meal?.image) {\n        const imagePath = `public${meal.image}`;\n        if (node_fs__WEBPACK_IMPORTED_MODULE_3___default().existsSync(imagePath)) {\n            node_fs__WEBPACK_IMPORTED_MODULE_3___default().unlinkSync(imagePath);\n        }\n    }\n    // smažeme z databáze\n    db.prepare(\"DELETE FROM meals WHERE slug = ?\").run(slug);\n}\nfunction safeJsonArray(value) {\n    try {\n        const parsed = JSON.parse(value);\n        return Array.isArray(parsed) ? parsed : [];\n    } catch  {\n        // fallback pro stará data: \"a,b,c\" nebo \"něco\\nněco\"\n        return String(value || \"\").split(/[\\n,]/).map((s)=>s.trim()).filter(Boolean);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1BLEVBQUVqRCxJQUFJLElBQ2pCa0QsTUFBTSxDQUFDQztJQUNaO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb29kaWVzLy4vbGliL21lYWxzLmpzP2FiMzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNxbCBmcm9tIFwiYmV0dGVyLXNxbGl0ZTNcIjtcbmltcG9ydCBzbHVnaWZ5IGZyb20gXCJzbHVnaWZ5XCI7XG5pbXBvcnQgeHNzIGZyb20gXCJ4c3NcIjtcbi8vIHdvcmtpbmcgd2l0aCBmaWxlIHN5c3RlbVxuaW1wb3J0IGZzIGZyb20gXCJub2RlOmZzXCI7XG5cbmNvbnN0IGRiID0gc3FsKFwibWVhbHMuZGJcIik7XG5cbmRiLnByZXBhcmUoXG4gIGBcbiAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgbWVhbHMgKFxuICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICBzbHVnIFRFWFQgTk9UIE5VTEwgVU5JUVVFLFxuICAgIHRpdGxlIFRFWFQgTk9UIE5VTEwsXG4gICAgaW1hZ2UgVEVYVCBOT1QgTlVMTCxcbiAgICBpbmdyZWRpZW50cyBURVhUIE5PVCBOVUxMLFxuICAgIGluc3RydWN0aW9ucyBURVhUIE5PVCBOVUxMLFxuICAgIGNvb2tpbmdfdGltZSBJTlRFR0VSIE5PVCBOVUxMLFxuICAgIGNhdGVnb3JpZXMgVEVYVCBOT1QgTlVMTCxcbiAgICAgICAgc2VydmluZ3MgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDEsXG5cbiAgICBjcmVhdG9yIFRFWFQgTk9UIE5VTEwsXG4gICAgY3JlYXRvcl9lbWFpbCBURVhUIE5PVCBOVUxMXG4gIClcbmAsXG4pLnJ1bigpO1xuXG5kYi5wcmVwYXJlKFxuICBgXG4gIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGluZ3JlZGllbnRfbWFwIChcbiAgICBpbmdyZWRpZW50X25vcm0gVEVYVCBQUklNQVJZIEtFWSxcbiAgICBmZGNfaWQgSU5URUdFUiBOT1QgTlVMTCxcbiAgICBub3RlIFRFWFRcbiAgKVxuYCxcbikucnVuKCk7XG5cbmRiLnByZXBhcmUoXG4gIGBcbiAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgbnV0cml0aW9uX2NhY2hlIChcbiAgICBtZWFsX3NsdWcgVEVYVCBQUklNQVJZIEtFWSxcbiAgICBkYXRhX2pzb24gVEVYVCBOT1QgTlVMTCxcbiAgICB1cGRhdGVkX2F0IElOVEVHRVIgTk9UIE5VTExcbiAgKVxuYCxcbikucnVuKCk7XG5cbmRiLnByZXBhcmUoXG4gIGBcbiAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgcGllY2Vfd2VpZ2h0cyAoXG4gICAgaW5ncmVkaWVudF9ub3JtIFRFWFQgUFJJTUFSWSBLRVksXG4gICAgZ3JhbXNfcGVyX3BpZWNlIFJFQUwgTk9UIE5VTExcbiAgKVxuYCxcbikucnVuKCk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNZWFscyh7IGNhdGVnb3J5ID0gXCJcIiwgcSA9IFwiXCIgfSA9IHt9KSB7XG4gIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMDApKTtcblxuICAvLyBEQiBtw6EgY2F0ZWdvcmllcyBqYWtvIEpTT04gc3RyaW5nID0+IGZpbHRyIHDFmWVzIExJS0UgbmEgXCJ2YWx1ZVwiXG4gIC8vIHRpdGxlIHNlYXJjaCBqZSBjYXNlLWluc2Vuc2l0aXZlIHDFmWVzIExPV0VSKClcbiAgbGV0IHF1ZXJ5ID0gXCJTRUxFQ1QgKiBGUk9NIG1lYWxzXCI7XG4gIGNvbnN0IHdoZXJlID0gW107XG4gIGNvbnN0IHBhcmFtcyA9IHt9O1xuXG4gIGlmIChjYXRlZ29yeSkge1xuICAgIC8vIGNhdGVnb3JpZXMgdWxvxb5lbsOpIGpha28gSlNPTiBhcnJheTogW1wic25hY2tcIixcImRpbm5lclwiXVxuICAgIC8vIG1hdGNoIG5hIFwic25hY2tcIiB2xI1ldG7EmyB1dm96b3ZlaywgYWJ5IHNlIG5ldHJlZm92YWxvIGRvIHBvZMWZZXTEm3pjxa9cbiAgICB3aGVyZS5wdXNoKFwiY2F0ZWdvcmllcyBMSUtFIEBjYXRcIik7XG4gICAgcGFyYW1zLmNhdCA9IGAlXFxcIiR7Y2F0ZWdvcnl9XFxcIiVgO1xuICB9XG5cbiAgaWYgKHEpIHtcbiAgICB3aGVyZS5wdXNoKFwiTE9XRVIodGl0bGUpIExJS0UgQHFcIik7XG4gICAgcGFyYW1zLnEgPSBgJSR7cS50b0xvd2VyQ2FzZSgpLnRyaW0oKX0lYDtcbiAgfVxuXG4gIGlmICh3aGVyZS5sZW5ndGgpIHtcbiAgICBxdWVyeSArPSBcIiBXSEVSRSBcIiArIHdoZXJlLmpvaW4oXCIgQU5EIFwiKTtcbiAgfVxuXG4gIHF1ZXJ5ICs9IFwiIE9SREVSIEJZIGlkIERFU0NcIjtcblxuICBjb25zdCBtZWFscyA9IGRiLnByZXBhcmUocXVlcnkpLmFsbChwYXJhbXMpO1xuXG4gIHJldHVybiBtZWFscy5tYXAoKG0pID0+ICh7XG4gICAgLi4ubSxcbiAgICBpbmdyZWRpZW50czogc2FmZUpzb25BcnJheShtLmluZ3JlZGllbnRzKSxcbiAgICBpbnN0cnVjdGlvbnM6IHNhZmVKc29uQXJyYXkobS5pbnN0cnVjdGlvbnMpLFxuICAgIGNhdGVnb3JpZXM6IHNhZmVKc29uQXJyYXkobS5jYXRlZ29yaWVzKSxcbiAgfSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWVhbChzbHVnKSB7XG4gIGNvbnN0IG1lYWwgPSBkYi5wcmVwYXJlKFwiU0VMRUNUICogRlJPTSBtZWFscyBXaGVyZSBzbHVnID0gP1wiKS5nZXQoc2x1Zyk7XG5cbiAgaWYgKCFtZWFsKSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4ge1xuICAgIC4uLm1lYWwsXG4gICAgaW5ncmVkaWVudHM6IHNhZmVKc29uQXJyYXkobWVhbC5pbmdyZWRpZW50cyksXG4gICAgaW5zdHJ1Y3Rpb25zOiBzYWZlSnNvbkFycmF5KG1lYWwuaW5zdHJ1Y3Rpb25zKSxcbiAgICBjYXRlZ29yaWVzOiBzYWZlSnNvbkFycmF5KG1lYWwuY2F0ZWdvcmllcyksXG4gIH07XG59XG4vLyBmdW5jdGlvbiB0byBzYXZlIGZpbGUgYW5kIGRhdGEgdG8gZGF0YWJhc2VcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlTWVhbChtZWFsKSB7XG4gIG1lYWwuc2x1ZyA9IHNsdWdpZnkobWVhbC50aXRsZSwgeyBsb3dlcjogdHJ1ZSB9KTtcbiAgbWVhbC5pbnN0cnVjdGlvbnMgPSB4c3MobWVhbC5pbnN0cnVjdGlvbnMpO1xuXG4gIG1lYWwuY29va2luZ190aW1lID0gTnVtYmVyKG1lYWwuY29va2luZ190aW1lKTtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobWVhbC5jb29raW5nX3RpbWUpIHx8IG1lYWwuY29va2luZ190aW1lIDw9IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvb2tpbmcgdGltZVwiKTtcbiAgfVxuXG4gIG1lYWwuc2VydmluZ3MgPSBOdW1iZXIobWVhbC5zZXJ2aW5ncyk7XG4gIGlmIChcbiAgICAhTnVtYmVyLmlzSW50ZWdlcihtZWFsLnNlcnZpbmdzKSB8fFxuICAgIG1lYWwuc2VydmluZ3MgPCAxIHx8XG4gICAgbWVhbC5zZXJ2aW5ncyA+IDIwXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc2VydmluZ3NcIik7XG4gIH1cblxuICBjb25zdCBleHRlbnNpb24gPSBtZWFsLmltYWdlLm5hbWUuc3BsaXQoXCIuXCIpLnBvcCgpO1xuICBjb25zdCBmaWxlTmFtZSA9IGAke21lYWwuc2x1Z30uJHtleHRlbnNpb259YDtcblxuICBjb25zdCBzdHJlYW0gPSBmcy5jcmVhdGVXcml0ZVN0cmVhbShgcHVibGljL2ltYWdlcy8ke2ZpbGVOYW1lfWApO1xuICBjb25zdCBidWZmZXJlZEltYWdlID0gYXdhaXQgbWVhbC5pbWFnZS5hcnJheUJ1ZmZlcigpO1xuXG4gIHN0cmVhbS53cml0ZShCdWZmZXIuZnJvbShidWZmZXJlZEltYWdlKSwgKGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTYXZpbmcgaW1hZ2UgZmlsZWRcIik7XG4gICAgfVxuICB9KTtcblxuICBtZWFsLmltYWdlID0gYC9pbWFnZXMvJHtmaWxlTmFtZX1gO1xuXG4gIGRiLnByZXBhcmUoXG4gICAgYFxuICAgIElOU0VSVCBJTlRPIG1lYWxzXG4gICAgICAodGl0bGUsIGluZ3JlZGllbnRzLCBpbnN0cnVjdGlvbnMsIGltYWdlLCBjb29raW5nX3RpbWUsIGNhdGVnb3JpZXMsIHNlcnZpbmdzLCBjcmVhdG9yLCBjcmVhdG9yX2VtYWlsLCBzbHVnKVxuICAgIFZBTFVFU1xuICAgICAgKEB0aXRsZSwgQGluZ3JlZGllbnRzLCBAaW5zdHJ1Y3Rpb25zLCBAaW1hZ2UsIEBjb29raW5nX3RpbWUsIEBjYXRlZ29yaWVzLEBzZXJ2aW5ncywgQGNyZWF0b3IsIEBjcmVhdG9yX2VtYWlsLCBAc2x1ZylcbiAgYCxcbiAgKS5ydW4obWVhbCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVNZWFsKHNsdWcpIHtcbiAgY29uc3QgbWVhbCA9IGdldE1lYWwoc2x1Zyk7XG5cbiAgLy8gc21hxb5lbWUgb2Jyw6F6ZWsgeiBkaXNrdSwgcG9rdWQgZXhpc3R1amVcbiAgaWYgKG1lYWw/LmltYWdlKSB7XG4gICAgY29uc3QgaW1hZ2VQYXRoID0gYHB1YmxpYyR7bWVhbC5pbWFnZX1gO1xuICAgIGlmIChmcy5leGlzdHNTeW5jKGltYWdlUGF0aCkpIHtcbiAgICAgIGZzLnVubGlua1N5bmMoaW1hZ2VQYXRoKTtcbiAgICB9XG4gIH1cblxuICAvLyBzbWHFvmVtZSB6IGRhdGFiw6F6ZVxuICBkYi5wcmVwYXJlKFwiREVMRVRFIEZST00gbWVhbHMgV0hFUkUgc2x1ZyA9ID9cIikucnVuKHNsdWcpO1xufVxuXG5mdW5jdGlvbiBzYWZlSnNvbkFycmF5KHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocGFyc2VkKSA/IHBhcnNlZCA6IFtdO1xuICB9IGNhdGNoIHtcbiAgICAvLyBmYWxsYmFjayBwcm8gc3RhcsOhIGRhdGE6IFwiYSxiLGNcIiBuZWJvIFwibsSbY29cXG5uxJtjb1wiXG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSB8fCBcIlwiKVxuICAgICAgLnNwbGl0KC9bXFxuLF0vKVxuICAgICAgLm1hcCgocykgPT4gcy50cmltKCkpXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICB9XG59XG4iXSwibmFtZXMiOlsic3FsIiwic2x1Z2lmeSIsInhzcyIsImZzIiwiZGIiLCJwcmVwYXJlIiwicnVuIiwiZ2V0TWVhbHMiLCJjYXRlZ29yeSIsInEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJxdWVyeSIsIndoZXJlIiwicGFyYW1zIiwicHVzaCIsImNhdCIsInRvTG93ZXJDYXNlIiwidHJpbSIsImxlbmd0aCIsImpvaW4iLCJtZWFscyIsImFsbCIsIm1hcCIsIm0iLCJpbmdyZWRpZW50cyIsInNhZmVKc29uQXJyYXkiLCJpbnN0cnVjdGlvbnMiLCJjYXRlZ29yaWVzIiwiZ2V0TWVhbCIsInNsdWciLCJtZWFsIiwiZ2V0Iiwic2F2ZU1lYWwiLCJ0aXRsZSIsImxvd2VyIiwiY29va2luZ190aW1lIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJFcnJvciIsInNlcnZpbmdzIiwiaXNJbnRlZ2VyIiwiZXh0ZW5zaW9uIiwiaW1hZ2UiLCJuYW1lIiwic3BsaXQiLCJwb3AiLCJmaWxlTmFtZSIsInN0cmVhbSIsImNyZWF0ZVdyaXRlU3RyZWFtIiwiYnVmZmVyZWRJbWFnZSIsImFycmF5QnVmZmVyIiwid3JpdGUiLCJCdWZmZXIiLCJmcm9tIiwiZXJyb3IiLCJkZWxldGVNZWFsIiwiaW1hZ2VQYXRoIiwiZXhpc3RzU3luYyIsInVubGlua1N5bmMiLCJ2YWx1ZSIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsIkFycmF5IiwiaXNBcnJheSIsIlN0cmluZyIsInMiLCJmaWx0ZXIiLCJCb29sZWFuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/meals.js\n");

/***/ }),

/***/ "(rsc)/./lib/nutrition.js":
/*!**************************!*\
  !*** ./lib/nutrition.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   computeNutritionFromIngredients: () => (/* binding */ computeNutritionFromIngredients)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n\nconst db = better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default()(\"meals.db\");\nconst FDC_BASE = \"https://api.nal.usda.gov/fdc/v1\";\n// základné konverzie na gramy (MVP)\nfunction toGrams(amount, unit, ingredientNorm) {\n    const a = Number(amount);\n    if (!Number.isFinite(a) || a <= 0) return null;\n    const u = (unit || \"\").trim();\n    if (u === \"mg\") return a / 1000;\n    if (u === \"g\") return a;\n    if (u === \"kg\") return a * 1000;\n    // MVP: ml/l ~ gramy (pre vodové veci ok, pre olej odchýlka)\n    if (u === \"ml\") return a;\n    if (u === \"l\") return a * 1000;\n    if (u === \"tsp\") return a * 5; // 1 čajová lyžička ~ 5 g/ml\n    if (u === \"tbsp\") return a * 15; // 1 polievková lyžica ~ 15 g/ml\n    if (u === \"pinch\") return a * 0.3; // špetka ~ 0.3 g (hrubý odhad)\n    if (u === \"pcs\") {\n        const row = db.prepare(\"SELECT grams_per_piece FROM piece_weights WHERE ingredient_norm = ?\").get(ingredientNorm);\n        if (!row) return null;\n        return a * Number(row.grams_per_piece);\n    }\n    return null;\n}\nfunction normName(name) {\n    return String(name || \"\").toLowerCase().trim().replace(/\\s+/g, \" \");\n}\nasync function fdcSearch(query, apiKey) {\n    if (!apiKey) throw new Error(\"Missing FDC_API_KEY\");\n    const url = `${FDC_BASE}/foods/search?` + new URLSearchParams({\n        api_key: apiKey,\n        query,\n        pageSize: \"5\"\n    });\n    const res = await fetch(url, {\n        headers: {\n            Accept: \"application/json\",\n            \"User-Agent\": \"Foodies/1.0 (local dev)\"\n        }\n    });\n    if (!res.ok) {\n        const body = await res.text().catch(()=>\"\");\n        throw new Error(`FDC search failed: ${res.status} ${body}`);\n    }\n    return res.json();\n}\nasync function fdcFood(fdcId, apiKey) {\n    const res = await fetch(`${FDC_BASE}/food/${fdcId}?api_key=${apiKey}`);\n    if (!res.ok) throw new Error(`FDC food failed: ${res.status}`);\n    return res.json();\n}\n// vyberieme nutrienty (FDC vracia rôzne názvy; berieme podľa \"name\" + jednotiek)\nfunction pickNutrients(foodJson) {\n    const out = {\n        kcal_100g: 0,\n        protein_g_100g: 0,\n        carbs_g_100g: 0,\n        fat_g_100g: 0,\n        fiber_g_100g: 0,\n        sodium_mg_100g: 0\n    };\n    const nutrients = foodJson?.foodNutrients || [];\n    for (const n of nutrients){\n        const name = (n.nutrient?.name || n.nutrientName || \"\").toLowerCase();\n        const unit = (n.nutrient?.unitName || n.unitName || \"\").toLowerCase();\n        const val = Number(n.amount ?? n.value);\n        if (!Number.isFinite(val)) continue;\n        // energia\n        if (name.includes(\"energy\") && (unit === \"kcal\" || unit === \"kj\")) {\n            // ak je kJ, môžeš prepočítať; MVP berieme kcal, kJ ignor\n            if (unit === \"kcal\") out.kcal_100g = val;\n        }\n        if (name.includes(\"protein\") && unit === \"g\") out.protein_g_100g = val;\n        if (name.includes(\"carbohydrate\") && unit === \"g\") out.carbs_g_100g = val;\n        if ((name.includes(\"total lipid\") || name === \"fat\") && unit === \"g\") out.fat_g_100g = val;\n        if (name.includes(\"fiber\") && unit === \"g\") out.fiber_g_100g = val;\n        if (name.includes(\"sodium\") && unit === \"mg\") out.sodium_mg_100g = val;\n    }\n    return out;\n}\nfunction sumNutrients(sum, n, grams) {\n    const factor = grams / 100;\n    sum.kcal += n.kcal_100g * factor;\n    sum.protein_g += n.protein_g_100g * factor;\n    sum.carbs_g += n.carbs_g_100g * factor;\n    sum.fat_g += n.fat_g_100g * factor;\n    sum.fiber_g += n.fiber_g_100g * factor;\n    sum.sodium_mg += n.sodium_mg_100g * factor;\n}\nasync function computeNutritionFromIngredients(ingredientGroups, servings, apiKey) {\n    const total = {\n        kcal: 0,\n        protein_g: 0,\n        carbs_g: 0,\n        fat_g: 0,\n        fiber_g: 0,\n        sodium_mg: 0,\n        unknown: []\n    };\n    // flatten groups → items\n    const items = [];\n    for (const g of ingredientGroups || []){\n        for (const ing of g.items || [])items.push(ing);\n    }\n    for (const ing of items){\n        const nameNorm = normName(ing.name);\n        if (!nameNorm) continue;\n        const grams = toGrams(ing.amount, ing.unit, nameNorm);\n        if (!grams) {\n            total.unknown.push({\n                ...ing,\n                reason: \"Neviem prepoč\\xedtať jednotku na gramy (pcs/lyžice bez v\\xe1hy).\"\n            });\n            continue;\n        }\n        // 1) skús mapu\n        const mapped = db.prepare(\"SELECT fdc_id FROM ingredient_map WHERE ingredient_norm = ?\").get(nameNorm);\n        let fdcId = mapped?.fdc_id;\n        // 2) ak nie je, vyhľadaj a zober prvý hit (MVP)\n        if (!fdcId) {\n            const search = await fdcSearch(nameNorm, apiKey);\n            const hit = search?.foods?.[0];\n            if (!hit?.fdcId) {\n                total.unknown.push({\n                    ...ing,\n                    reason: \"Nenašlo sa v USDA datab\\xe1ze.\"\n                });\n                continue;\n            }\n            fdcId = hit.fdcId;\n            db.prepare(\"INSERT OR REPLACE INTO ingredient_map (ingredient_norm, fdc_id, note) VALUES (?, ?, ?)\").run(nameNorm, fdcId, `auto-match: ${hit.description || \"\"}`);\n        }\n        const food = await fdcFood(fdcId, apiKey);\n        const n = pickNutrients(food);\n        sumNutrients(total, n, grams);\n    }\n    // soľ = sodík * 2.5 (EU label štandard) :contentReference[oaicite:2]{index=2}\n    const salt_g = total.sodium_mg / 1000 * 2.5;\n    const safeServings = Number.isFinite(Number(servings)) && Number(servings) > 0 ? Number(servings) : 1;\n    const perServing = {\n        kcal: total.kcal / safeServings,\n        protein_g: total.protein_g / safeServings,\n        carbs_g: total.carbs_g / safeServings,\n        fat_g: total.fat_g / safeServings,\n        fiber_g: total.fiber_g / safeServings,\n        salt_g: salt_g / safeServings\n    };\n    const perRecipe = {\n        kcal: total.kcal,\n        protein_g: total.protein_g,\n        carbs_g: total.carbs_g,\n        fat_g: total.fat_g,\n        fiber_g: total.fiber_g,\n        salt_g\n    };\n    return {\n        perRecipe,\n        perServing,\n        unknown: total.unknown\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cml0aW9uLmpzPzlhMzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNxbCBmcm9tIFwiYmV0dGVyLXNxbGl0ZTNcIjtcblxuY29uc3QgZGIgPSBzcWwoXCJtZWFscy5kYlwiKTtcblxuY29uc3QgRkRDX0JBU0UgPSBcImh0dHBzOi8vYXBpLm5hbC51c2RhLmdvdi9mZGMvdjFcIjtcblxuLy8gesOha2xhZG7DqSBrb252ZXJ6aWUgbmEgZ3JhbXkgKE1WUClcbmZ1bmN0aW9uIHRvR3JhbXMoYW1vdW50LCB1bml0LCBpbmdyZWRpZW50Tm9ybSkge1xuICBjb25zdCBhID0gTnVtYmVyKGFtb3VudCk7XG4gIGlmICghTnVtYmVyLmlzRmluaXRlKGEpIHx8IGEgPD0gMCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgdSA9ICh1bml0IHx8IFwiXCIpLnRyaW0oKTtcblxuICBpZiAodSA9PT0gXCJtZ1wiKSByZXR1cm4gYSAvIDEwMDA7XG4gIGlmICh1ID09PSBcImdcIikgcmV0dXJuIGE7XG4gIGlmICh1ID09PSBcImtnXCIpIHJldHVybiBhICogMTAwMDtcblxuICAvLyBNVlA6IG1sL2wgfiBncmFteSAocHJlIHZvZG92w6kgdmVjaSBvaywgcHJlIG9sZWogb2RjaMO9bGthKVxuICBpZiAodSA9PT0gXCJtbFwiKSByZXR1cm4gYTtcbiAgaWYgKHUgPT09IFwibFwiKSByZXR1cm4gYSAqIDEwMDA7XG5cbiAgaWYgKHUgPT09IFwidHNwXCIpIHJldHVybiBhICogNTsgLy8gMSDEjWFqb3bDoSBsecW+acSNa2EgfiA1IGcvbWxcbiAgaWYgKHUgPT09IFwidGJzcFwiKSByZXR1cm4gYSAqIDE1OyAvLyAxIHBvbGlldmtvdsOhIGx5xb5pY2EgfiAxNSBnL21sXG4gIGlmICh1ID09PSBcInBpbmNoXCIpIHJldHVybiBhICogMC4zOyAvLyDFoXBldGthIH4gMC4zIGcgKGhydWLDvSBvZGhhZClcblxuICBpZiAodSA9PT0gXCJwY3NcIikge1xuICAgIGNvbnN0IHJvdyA9IGRiXG4gICAgICAucHJlcGFyZShcbiAgICAgICAgXCJTRUxFQ1QgZ3JhbXNfcGVyX3BpZWNlIEZST00gcGllY2Vfd2VpZ2h0cyBXSEVSRSBpbmdyZWRpZW50X25vcm0gPSA/XCIsXG4gICAgICApXG4gICAgICAuZ2V0KGluZ3JlZGllbnROb3JtKTtcbiAgICBpZiAoIXJvdykgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGEgKiBOdW1iZXIocm93LmdyYW1zX3Blcl9waWVjZSk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gbm9ybU5hbWUobmFtZSkge1xuICByZXR1cm4gU3RyaW5nKG5hbWUgfHwgXCJcIilcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC50cmltKClcbiAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIik7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZkY1NlYXJjaChxdWVyeSwgYXBpS2V5KSB7XG4gIGlmICghYXBpS2V5KSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIEZEQ19BUElfS0VZXCIpO1xuXG4gIGNvbnN0IHVybCA9XG4gICAgYCR7RkRDX0JBU0V9L2Zvb2RzL3NlYXJjaD9gICtcbiAgICBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgIGFwaV9rZXk6IGFwaUtleSxcbiAgICAgIHF1ZXJ5LFxuICAgICAgcGFnZVNpemU6IFwiNVwiLFxuICAgIH0pO1xuXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBcIlVzZXItQWdlbnRcIjogXCJGb29kaWVzLzEuMCAobG9jYWwgZGV2KVwiLCAvLyBvYsSNYXMgcG9tw7TFvmUgcHJpIG5pZWt0b3LDvWNoIEFQSSBnYXRld2F5XG4gICAgfSxcbiAgfSk7XG5cbiAgaWYgKCFyZXMub2spIHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzLnRleHQoKS5jYXRjaCgoKSA9PiBcIlwiKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZEQyBzZWFyY2ggZmFpbGVkOiAke3Jlcy5zdGF0dXN9ICR7Ym9keX1gKTtcbiAgfVxuXG4gIHJldHVybiByZXMuanNvbigpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBmZGNGb29kKGZkY0lkLCBhcGlLZXkpIHtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7RkRDX0JBU0V9L2Zvb2QvJHtmZGNJZH0/YXBpX2tleT0ke2FwaUtleX1gKTtcbiAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgRkRDIGZvb2QgZmFpbGVkOiAke3Jlcy5zdGF0dXN9YCk7XG4gIHJldHVybiByZXMuanNvbigpO1xufVxuXG4vLyB2eWJlcmllbWUgbnV0cmllbnR5IChGREMgdnJhY2lhIHLDtHpuZSBuw6F6dnk7IGJlcmllbWUgcG9kxL5hIFwibmFtZVwiICsgamVkbm90aWVrKVxuZnVuY3Rpb24gcGlja051dHJpZW50cyhmb29kSnNvbikge1xuICBjb25zdCBvdXQgPSB7XG4gICAga2NhbF8xMDBnOiAwLFxuICAgIHByb3RlaW5fZ18xMDBnOiAwLFxuICAgIGNhcmJzX2dfMTAwZzogMCxcbiAgICBmYXRfZ18xMDBnOiAwLFxuICAgIGZpYmVyX2dfMTAwZzogMCxcbiAgICBzb2RpdW1fbWdfMTAwZzogMCxcbiAgfTtcblxuICBjb25zdCBudXRyaWVudHMgPSBmb29kSnNvbj8uZm9vZE51dHJpZW50cyB8fCBbXTtcbiAgZm9yIChjb25zdCBuIG9mIG51dHJpZW50cykge1xuICAgIGNvbnN0IG5hbWUgPSAobi5udXRyaWVudD8ubmFtZSB8fCBuLm51dHJpZW50TmFtZSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHVuaXQgPSAobi5udXRyaWVudD8udW5pdE5hbWUgfHwgbi51bml0TmFtZSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHZhbCA9IE51bWJlcihuLmFtb3VudCA/PyBuLnZhbHVlKTtcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZSh2YWwpKSBjb250aW51ZTtcblxuICAgIC8vIGVuZXJnaWFcbiAgICBpZiAobmFtZS5pbmNsdWRlcyhcImVuZXJneVwiKSAmJiAodW5pdCA9PT0gXCJrY2FsXCIgfHwgdW5pdCA9PT0gXCJralwiKSkge1xuICAgICAgLy8gYWsgamUga0osIG3DtMW+ZcWhIHByZXBvxI3DrXRhxaU7IE1WUCBiZXJpZW1lIGtjYWwsIGtKIGlnbm9yXG4gICAgICBpZiAodW5pdCA9PT0gXCJrY2FsXCIpIG91dC5rY2FsXzEwMGcgPSB2YWw7XG4gICAgfVxuXG4gICAgaWYgKG5hbWUuaW5jbHVkZXMoXCJwcm90ZWluXCIpICYmIHVuaXQgPT09IFwiZ1wiKSBvdXQucHJvdGVpbl9nXzEwMGcgPSB2YWw7XG4gICAgaWYgKG5hbWUuaW5jbHVkZXMoXCJjYXJib2h5ZHJhdGVcIikgJiYgdW5pdCA9PT0gXCJnXCIpIG91dC5jYXJic19nXzEwMGcgPSB2YWw7XG4gICAgaWYgKChuYW1lLmluY2x1ZGVzKFwidG90YWwgbGlwaWRcIikgfHwgbmFtZSA9PT0gXCJmYXRcIikgJiYgdW5pdCA9PT0gXCJnXCIpXG4gICAgICBvdXQuZmF0X2dfMTAwZyA9IHZhbDtcblxuICAgIGlmIChuYW1lLmluY2x1ZGVzKFwiZmliZXJcIikgJiYgdW5pdCA9PT0gXCJnXCIpIG91dC5maWJlcl9nXzEwMGcgPSB2YWw7XG5cbiAgICBpZiAobmFtZS5pbmNsdWRlcyhcInNvZGl1bVwiKSAmJiB1bml0ID09PSBcIm1nXCIpIG91dC5zb2RpdW1fbWdfMTAwZyA9IHZhbDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHN1bU51dHJpZW50cyhzdW0sIG4sIGdyYW1zKSB7XG4gIGNvbnN0IGZhY3RvciA9IGdyYW1zIC8gMTAwO1xuICBzdW0ua2NhbCArPSBuLmtjYWxfMTAwZyAqIGZhY3RvcjtcbiAgc3VtLnByb3RlaW5fZyArPSBuLnByb3RlaW5fZ18xMDBnICogZmFjdG9yO1xuICBzdW0uY2FyYnNfZyArPSBuLmNhcmJzX2dfMTAwZyAqIGZhY3RvcjtcbiAgc3VtLmZhdF9nICs9IG4uZmF0X2dfMTAwZyAqIGZhY3RvcjtcbiAgc3VtLmZpYmVyX2cgKz0gbi5maWJlcl9nXzEwMGcgKiBmYWN0b3I7XG4gIHN1bS5zb2RpdW1fbWcgKz0gbi5zb2RpdW1fbWdfMTAwZyAqIGZhY3Rvcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbXB1dGVOdXRyaXRpb25Gcm9tSW5ncmVkaWVudHMoXG4gIGluZ3JlZGllbnRHcm91cHMsXG4gIHNlcnZpbmdzLFxuICBhcGlLZXksXG4pIHtcbiAgY29uc3QgdG90YWwgPSB7XG4gICAga2NhbDogMCxcbiAgICBwcm90ZWluX2c6IDAsXG4gICAgY2FyYnNfZzogMCxcbiAgICBmYXRfZzogMCxcbiAgICBmaWJlcl9nOiAwLFxuICAgIHNvZGl1bV9tZzogMCxcbiAgICB1bmtub3duOiBbXSwgLy8gaW5ncmVkaWVuY2llLCBrdG9yw6kgbmV2aWVtZSBzcG/EjcOtdGHFpVxuICB9O1xuXG4gIC8vIGZsYXR0ZW4gZ3JvdXBzIOKGkiBpdGVtc1xuICBjb25zdCBpdGVtcyA9IFtdO1xuICBmb3IgKGNvbnN0IGcgb2YgaW5ncmVkaWVudEdyb3VwcyB8fCBbXSkge1xuICAgIGZvciAoY29uc3QgaW5nIG9mIGcuaXRlbXMgfHwgW10pIGl0ZW1zLnB1c2goaW5nKTtcbiAgfVxuXG4gIGZvciAoY29uc3QgaW5nIG9mIGl0ZW1zKSB7XG4gICAgY29uc3QgbmFtZU5vcm0gPSBub3JtTmFtZShpbmcubmFtZSk7XG4gICAgaWYgKCFuYW1lTm9ybSkgY29udGludWU7XG5cbiAgICBjb25zdCBncmFtcyA9IHRvR3JhbXMoaW5nLmFtb3VudCwgaW5nLnVuaXQsIG5hbWVOb3JtKTtcbiAgICBpZiAoIWdyYW1zKSB7XG4gICAgICB0b3RhbC51bmtub3duLnB1c2goe1xuICAgICAgICAuLi5pbmcsXG4gICAgICAgIHJlYXNvbjogXCJOZXZpZW0gcHJlcG/EjcOtdGHFpSBqZWRub3RrdSBuYSBncmFteSAocGNzL2x5xb5pY2UgYmV6IHbDoWh5KS5cIixcbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gMSkgc2vDunMgbWFwdVxuICAgIGNvbnN0IG1hcHBlZCA9IGRiXG4gICAgICAucHJlcGFyZShcIlNFTEVDVCBmZGNfaWQgRlJPTSBpbmdyZWRpZW50X21hcCBXSEVSRSBpbmdyZWRpZW50X25vcm0gPSA/XCIpXG4gICAgICAuZ2V0KG5hbWVOb3JtKTtcblxuICAgIGxldCBmZGNJZCA9IG1hcHBlZD8uZmRjX2lkO1xuXG4gICAgLy8gMikgYWsgbmllIGplLCB2eWjEvmFkYWogYSB6b2JlciBwcnbDvSBoaXQgKE1WUClcbiAgICBpZiAoIWZkY0lkKSB7XG4gICAgICBjb25zdCBzZWFyY2ggPSBhd2FpdCBmZGNTZWFyY2gobmFtZU5vcm0sIGFwaUtleSk7XG4gICAgICBjb25zdCBoaXQgPSBzZWFyY2g/LmZvb2RzPy5bMF07XG4gICAgICBpZiAoIWhpdD8uZmRjSWQpIHtcbiAgICAgICAgdG90YWwudW5rbm93bi5wdXNoKHsgLi4uaW5nLCByZWFzb246IFwiTmVuYcWhbG8gc2EgdiBVU0RBIGRhdGFiw6F6ZS5cIiB9KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBmZGNJZCA9IGhpdC5mZGNJZDtcblxuICAgICAgZGIucHJlcGFyZShcbiAgICAgICAgXCJJTlNFUlQgT1IgUkVQTEFDRSBJTlRPIGluZ3JlZGllbnRfbWFwIChpbmdyZWRpZW50X25vcm0sIGZkY19pZCwgbm90ZSkgVkFMVUVTICg/LCA/LCA/KVwiLFxuICAgICAgKS5ydW4obmFtZU5vcm0sIGZkY0lkLCBgYXV0by1tYXRjaDogJHtoaXQuZGVzY3JpcHRpb24gfHwgXCJcIn1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBmb29kID0gYXdhaXQgZmRjRm9vZChmZGNJZCwgYXBpS2V5KTtcbiAgICBjb25zdCBuID0gcGlja051dHJpZW50cyhmb29kKTtcbiAgICBzdW1OdXRyaWVudHModG90YWwsIG4sIGdyYW1zKTtcbiAgfVxuXG4gIC8vIHNvxL4gPSBzb2TDrWsgKiAyLjUgKEVVIGxhYmVsIMWhdGFuZGFyZCkgOmNvbnRlbnRSZWZlcmVuY2Vbb2FpY2l0ZToyXXtpbmRleD0yfVxuICBjb25zdCBzYWx0X2cgPSAodG90YWwuc29kaXVtX21nIC8gMTAwMCkgKiAyLjU7XG5cbiAgY29uc3Qgc2FmZVNlcnZpbmdzID1cbiAgICBOdW1iZXIuaXNGaW5pdGUoTnVtYmVyKHNlcnZpbmdzKSkgJiYgTnVtYmVyKHNlcnZpbmdzKSA+IDBcbiAgICAgID8gTnVtYmVyKHNlcnZpbmdzKVxuICAgICAgOiAxO1xuXG4gIGNvbnN0IHBlclNlcnZpbmcgPSB7XG4gICAga2NhbDogdG90YWwua2NhbCAvIHNhZmVTZXJ2aW5ncyxcbiAgICBwcm90ZWluX2c6IHRvdGFsLnByb3RlaW5fZyAvIHNhZmVTZXJ2aW5ncyxcbiAgICBjYXJic19nOiB0b3RhbC5jYXJic19nIC8gc2FmZVNlcnZpbmdzLFxuICAgIGZhdF9nOiB0b3RhbC5mYXRfZyAvIHNhZmVTZXJ2aW5ncyxcbiAgICBmaWJlcl9nOiB0b3RhbC5maWJlcl9nIC8gc2FmZVNlcnZpbmdzLFxuICAgIHNhbHRfZzogc2FsdF9nIC8gc2FmZVNlcnZpbmdzLFxuICB9O1xuXG4gIGNvbnN0IHBlclJlY2lwZSA9IHtcbiAgICBrY2FsOiB0b3RhbC5rY2FsLFxuICAgIHByb3RlaW5fZzogdG90YWwucHJvdGVpbl9nLFxuICAgIGNhcmJzX2c6IHRvdGFsLmNhcmJzX2csXG4gICAgZmF0X2c6IHRvdGFsLmZhdF9nLFxuICAgIGZpYmVyX2c6IHRvdGFsLmZpYmVyX2csXG4gICAgc2FsdF9nLFxuICB9O1xuXG4gIHJldHVybiB7IHBlclJlY2lwZSwgcGVyU2VydmluZywgdW5rbm93bjogdG90YWwudW5rbm93biB9O1xufVxuIl0sIm5hbWVzIjpbInNxbCIsImRiIiwiRkRDX0JBU0UiLCJ0b0dyYW1zIiwiYW1vdW50IiwidW5pdCIsImluZ3JlZGllbnROb3JtIiwiYSIsIk51bWJlciIsImlzRmluaXRlIiwidSIsInRyaW0iLCJyb3ciLCJwcmVwYXJlIiwiZ2V0IiwiZ3JhbXNfcGVyX3BpZWNlIiwibm9ybU5hbWUiLCJuYW1lIiwiU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwiZmRjU2VhcmNoIiwicXVlcnkiLCJhcGlLZXkiLCJFcnJvciIsInVybCIsIlVSTFNlYXJjaFBhcmFtcyIsImFwaV9rZXkiLCJwYWdlU2l6ZSIsInJlcyIsImZldGNoIiwiaGVhZGVycyIsIkFjY2VwdCIsIm9rIiwiYm9keSIsInRleHQiLCJjYXRjaCIsInN0YXR1cyIsImpzb24iLCJmZGNGb29kIiwiZmRjSWQiLCJwaWNrTnV0cmllbnRzIiwiZm9vZEpzb24iLCJvdXQiLCJrY2FsXzEwMGciLCJwcm90ZWluX2dfMTAwZyIsImNhcmJzX2dfMTAwZyIsImZhdF9nXzEwMGciLCJmaWJlcl9nXzEwMGciLCJzb2RpdW1fbWdfMTAwZyIsIm51dHJpZW50cyIsImZvb2ROdXRyaWVudHMiLCJuIiwibnV0cmllbnQiLCJudXRyaWVudE5hbWUiLCJ1bml0TmFtZSIsInZhbCIsInZhbHVlIiwiaW5jbHVkZXMiLCJzdW1OdXRyaWVudHMiLCJzdW0iLCJncmFtcyIsImZhY3RvciIsImtjYWwiLCJwcm90ZWluX2ciLCJjYXJic19nIiwiZmF0X2ciLCJmaWJlcl9nIiwic29kaXVtX21nIiwiY29tcHV0ZU51dHJpdGlvbkZyb21JbmdyZWRpZW50cyIsImluZ3JlZGllbnRHcm91cHMiLCJzZXJ2aW5ncyIsInRvdGFsIiwidW5rbm93biIsIml0ZW1zIiwiZyIsImluZyIsInB1c2giLCJuYW1lTm9ybSIsInJlYXNvbiIsIm1hcHBlZCIsImZkY19pZCIsInNlYXJjaCIsImhpdCIsImZvb2RzIiwicnVuIiwiZGVzY3JpcHRpb24iLCJmb29kIiwic2FsdF9nIiwic2FmZVNlcnZpbmdzIiwicGVyU2VydmluZyIsInBlclJlY2lwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/nutrition.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/cssfilter","vendor-chunks/xss","vendor-chunks/slugify"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute&page=%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnutrition%2F%5Bslug%5D%2Froute.js&appDir=%2FUsers%2Fdianapetrovcikova%2FWebdev%2Fnext%2FFoodies%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdianapetrovcikova%2FWebdev%2Fnext%2FFoodies&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();